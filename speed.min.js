"use strict";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,l=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(function(){var e,t,_,n,i;t=_=require("types.js"),n=require("fs"),i=require("util"),e=function(){var v,p,l,w,r=function(){function b(e){var o=this;_classCallCheck(this,b),this.add=this.add.bind(this),e=_.forceObject(e),this.rounds=_.forceNumber(e.rounds,b.rounds),this.calls=_.forceNumber(e.calls,b.calls),this.details=_.forceBoolean(e.details,b.details),this.callbacks={},this.callbackCount=0,e.file&&(this.filename=_.forceString(e.file,b.file),this.logFile=n.createWriteStream(this.filename,{flags:"w"}),b.log=function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return o.logFile.write(i.format(t+"\n")),(e=console).log.apply(e,t)})}return _createClass(b,null,[{key:"log",value:function(){var e;return(e=console).log.apply(e,arguments)}},{key:"run",value:function(e,r,t,n,o,l){var i,a,s,u,c,f,d,h,y,g=4<arguments.length&&void 0!==o?o:"anonymus",m=5<arguments.length?l:void 0;if(!(e=_.forceFunction(e,null)))return b.log(g);if(t=_.forceNumber(t,b.rounds),r=_.forceNumber(r,b.calls),n=_.forceBoolean(n,b.details),!w(t*r)){for(m||b.log(g+": "+p(t)+" rounds of "+p(r)+" calls.."),c=Date.now(),d=u=1,f=t;1<=f?u<=f:f<=u;d=1<=f?++u:--u){for(a=0,h=Date.now();a++<r;)e();s=Date.now(),n&&!m&&b.log("round: "+d+": "+v(s-h+" ms",9))}return y=Date.now()-c,i=p(~~(y/t)),y=p(y),m?void 0:(b.log("average time for "+v(p(r)+" calls : ")+v(i+" ms",9)),b.log("total time for   "+v(p(r*t)+" calls : ")+v(y+" ms",9)),b.log())}}}]),_createClass(b,[{key:"add",value:function(e,r){var t,n,o=_slicedToArray(l(this,e,r),2);return n=o[0],t=o[1],!this.callbacks[n]&&_.isFunction(t)&&(this.callbacks[n]=t),this}},{key:"run",value:function(e,r){var t,n,o;if(b.log("*speed.js* - running "+this.callbackCount+" tests..\n"),_.isFunction(e&&!r))b.run(func,this.calls,this.rounds,this.details,n,!0),b.run(func,this.calls,this.rounds,this.details,n);else for(n in b.run(t,this.calls,this.rounds,this.details,n,!0),o=this.callbacks)t=o[n],b.run(t,this.calls,this.rounds,this.details,n);return this.logFile&&console.log("done! test results have been saved to:",this.filename,"\n"),this}}]),b}();return p=function(e,r,t){var n,o,l,i,a,s,u=1<arguments.length&&void 0!==r?r:3,c=2<arguments.length&&void 0!==t?t:".";if(""===(e=_.forceString(e)))return"";if(i=e.length-1,n=e[i--],i<0)return n;for(a=u,l=o=s=i;s<=0?o<=0:0<=o;l=s<=0?++o:--o)--a%u==0&&(n=c+n,a=u),n=e[l]+n;return n},(v=function(e,r){var t,n,o,l=1<arguments.length&&void 0!==r?r:20;if(t="",0<(l-=e.length))for(n=1,o=l;1<=o?n<=o:o<=n;1<=o?++n:--n)t+=" ";return v.right?t+e:e+t}).right=!0,w=function(e){if(e>r.maxCalls)return log("You are trying to run more than "+p(r.maxCalls)+" calls, increase Speed.maxCalls if you really want this."),log("Aborting.."),!0},l=function(e,r,t){return _.isFunction(r)&&(t=r,r="anonymus"),[r=++e.callbackCount+": "+r,t]},r.Types=t,r.details=!1,r.rounds=1,r.calls=1,r.maxCalls=1e8,r.file="./speed.log",r}.call(this),"undefined"!=typeof module&&null!==module?module.exports=e:"undefined"!=typeof window&&null!==window&&(window.Speed=e)}).call(void 0);