"use strict";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(function(){var e,r,t,n,l;r=t=require("types.js"),n=require("fs"),l=require("util"),e=function(){var e,o,i,a,s=function(){function r(e){var o=this;_classCallCheck(this,r),this.add=this.add.bind(this),e=t.forceObject(e),this.rounds=t.forceNumber(e.rounds,r.rounds),this.calls=t.forceNumber(e.calls,r.calls),this.details=t.forceBoolean(e.details,r.details),this.callbacks={},this.callbackCount=0,e.file&&(this.filename=t.forceString(e.file,r.file),this.logFile=n.createWriteStream(this.filename,{flags:"w"}),r.log=function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return o.logFile.write(l.format(t+"\n")),(e=console).log.apply(e,t)})}return _createClass(r,null,[{key:"log",value:function(){var e;return(e=console).log.apply(e,arguments)}},{key:"run",value:function(n,l,i,s){var u,c,f,d,h,y,g,m,b,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"anonymus",v=arguments.length>5?arguments[5]:void 0;if(!(n=t.forceFunction(n,null)))return r.log(p);if(i=t.forceNumber(i,r.rounds),l=t.forceNumber(l,r.calls),s=t.forceBoolean(s,r.details),!a(i*l)){for(v||r.log(p+": "+o(i)+" rounds of "+o(l)+" calls.."),h=Date.now(),g=d=1,y=i;1<=y?d<=y:d>=y;g=1<=y?++d:--d){for(c=0,m=Date.now();c++<l;)n();f=Date.now(),s&&!v&&r.log("round: "+g+": "+e(f-m+" ms",9))}return b=Date.now()-h,u=o(~~(b/i)),b=o(b),v?void 0:(r.log("average time for "+e(o(l)+" calls : ")+e(u+" ms",9)),r.log("total time for   "+e(o(l*i)+" calls : ")+e(b+" ms",9)),r.log())}}}]),_createClass(r,[{key:"add",value:function(e,r){var n,l,o=_slicedToArray(i(this,e,r),2);return l=o[0],n=o[1],!this.callbacks[l]&&t.isFunction(n)&&(this.callbacks[l]=n),this}},{key:"run",value:function(e,n){var l,o,i;if(r.log("*speed.js* - running "+this.callbackCount+" tests..\n"),t.isFunction(e&&!n))r.run(func,this.calls,this.rounds,this.details,o,!0),r.run(func,this.calls,this.rounds,this.details,o);else for(o in r.run(l,this.calls,this.rounds,this.details,o,!0),i=this.callbacks)l=i[o],r.run(l,this.calls,this.rounds,this.details,o);return this.logFile&&console.log("done! test results have been saved to:",this.filename,"\n"),this}}]),r}();return o=function(e){var r,n,l,o,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(""===(e=t.forceString(e)))return"";if(o=e.length-1,r=e[o--],o<0)return r;for(i=s,l=n=a=o;a<=0?n<=0:n>=0;l=a<=0?++n:--n)--i%s==0&&(r=u+r,i=s),r=e[l]+r;return r},e=function(r){var t,n,l,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t="",(o-=r.length)>0)for(n=1,l=o;1<=l?n<=l:n>=l;1<=l?++n:--n)t+=" ";return e.right?t+r:r+t},e.right=!0,a=function(e){if(e>s.maxCalls)return log("You are trying to run more than "+o(s.maxCalls)+" calls, increase Speed.maxCalls if you really want this."),log("Aborting.."),!0},i=function(e,r,n){return t.isFunction(r)&&(n=r,r="anonymus"),[r=++e.callbackCount+": "+r,n]},s.Types=r,s.details=!1,s.rounds=1,s.calls=1,s.maxCalls=1e8,s.file="./speed.log",s}.call(this),"undefined"!=typeof module&&null!==module?module.exports=e:"undefined"!=typeof window&&null!==window&&(window.Speed=e)}).call(void 0);